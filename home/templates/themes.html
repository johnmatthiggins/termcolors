{% extends "home.html" %}
{% load static %}
{% block title %}
	<title>Theme List</title>
{% endblock title %}
{% block root %}
	<div class="w-full flex flex-col items-center py-4 bg-black text-white" style="font-family: Inter;">
		<div class="mx-2 md:px-0 md:w-7/8 lg:px-0 lg:w-3/5">
			<div class="flex justify-between mb-2">
				<div class="flex">
					<input type="search" class="w-96 text-white border-2 border-white border-solid rounded-lg bg-black">
					<img class="ml-[-2.5rem] w-8 invert" src="{% static "search.svg" %}">
				</div>
				<h1 class="pl-4 text-4xl italic text-white" style="font-family: Acme;">TERMCOLORS.dev</h1>
			</div>
			<table>
				<thead class="text-lg">
					<tr>
						<th class="text-left" style="font-family: Inter;">Name</th>
						<th class="max-w-8">Colors</th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody style="font-family: Inter;">
				{% for scheme in colorschemes %}
					<tr id="{{ scheme.name|slugify }}" class="text-lg">
						<td class="min-w-8 hover:cursor-pointer flex gap-2">
							<a class="underline underline-offset-2 decoration-blue-500" href="/{{ scheme.name|slugify }}/">{{ scheme.name }}</a>
							{% if scheme.contrast_ratio > 16 %}
							<span class="text-sm bg-gray-200 rounded-full no-underline px-3 my-1 text-gray-700">High contrast</span>
							{% endif %}
						</td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.foreground }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.background }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color0 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color1 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color2 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color3 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color4 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color5 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color6 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color7 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color8 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color9 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color10 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color11 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color12 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color13 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color14 }}"></td>
						<td class="min-w-8 border border-dotted border-white" style="background-color: {{ scheme.color15 }}"></td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	<script>
	let rows = [];
	document.addEventListener("DOMContentLoaded", () => {
		let maxCellWidth = 0;
		document.querySelectorAll("tr td:nth-of-type(1)").forEach((element) => {
			const { width } = element.getBoundingClientRect();

			if (width > maxCellWidth) {
				maxCellWidth = width;
			}
		});
		document.querySelectorAll("tr th:nth-of-type(1)").forEach((row) => {
			row.style["min-width"] = `${maxCellWidth}px`;
		});

		const elements = document.querySelectorAll("tr");
		elements.forEach((element, i) => {
			if (i > 0) {
				rows.push(element);
			}
		});
		document.querySelector('[type="search"]').addEventListener("input", (event) => {
			const text = event.target.value;
			const matchingRows = [];

			rows.forEach((row) => {
				const themeName = row.children[0].textContent;
				if (themeName.toLowerCase().includes(text.toLowerCase())) {
					matchingRows.push(row);
				}
			});
			const tableBody = document.querySelector("tbody");

			// clear table
			tableBody.innerHTML = '';

			matchingRows.forEach((row) => {
				tableBody.appendChild(row);
			});
		});
	});
	</script>
{% endblock root %}
